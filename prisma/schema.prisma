datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
    ssl      = "require"
}

generator client {
    provider = "prisma-client-js"
}

model Product {
    id            Int        @id @default(autoincrement())
    slug          String     @unique
    name          String
    description   String
    itemsIncluded String[]
    imageUrl      String
    price         Float
    maxPerOrder   Int?
    isGift        Boolean?
    hasWine       Boolean?
    hasMessage    Boolean?
    LineItem      LineItem[]
}

enum PaymentMethod {
    CASH
    PAYPAL
}

model Order {
    id              Int           @id @default(autoincrement())
    lineItems       LineItem[]
    total           Float
    paymentMethod   PaymentMethod
    paymentRecieved DateTime?
    created         DateTime      @default(now())
    contact         Json
    isGift          Boolean?
    deliveryInfo    Json
    delivered       DateTime?
}

model LineItem {
    id                 Int     @id @default(autoincrement())
    orderId            Int
    Order              Order   @relation(fields: [orderId], references: [id])
    productId          Int
    product            Product @relation(fields: [productId], references: [id])
    quantity           Int
    productPriceAtSale Float
    customization      Json?
}
